(function(){const listA = [
  "GXtHkstZlOQ",
  "cLFm-OKsA8c",
  "sJUkVaqVzYk",
  "CqJb2quSbhg",
  "3wOR5AQrBgg",
  "LDB0Ql34Zew",
  "JIpvV8Mz_so"
];
;const listB=['jfKfPfyJRdk','hHW1oY26kxQ'];let player=null;let isReady=false;const LS_KEY='love_music_state_v1';const defaultState={playing:false,currentList:'A',indexA:0,indexB:0};function loadState(){try{return Object.assign({},defaultState,JSON.parse(localStorage.getItem(LS_KEY)||'{}'));}catch{return {...defaultState};}}function saveState(s){localStorage.setItem(LS_KEY,JSON.stringify(s));}let state=loadState();const pickRandomIndex=(arr)=>arr.length?Math.floor(Math.random()*arr.length):0;const swapList=(c)=>c==='A'?'B':'A';const btn=document.getElementById('music-btn');function setBtn(p){if(!btn)return;btn.textContent=p?'⏸︎ Pausa':'▶︎ Play música';btn.classList.toggle('active',p);}setBtn(state.playing);window.onYouTubeIframeAPIReady=function(){player=new YT.Player('yt-player',{height:'0',width:'0',videoId:getCurrentVideoId(),playerVars:{autoplay:0,controls:0,disablekb:1,fs:0,rel:0,modestbranding:1,playsinline:1},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError}});};function getCurrentVideoId(){const list=state.currentList==='A'?listA:listB;if(!list.length)return null;const idx=state.currentList==='A'?state.indexA:state.indexB;return list[Math.max(0,Math.min(idx,list.length-1))];}function loadRandomFrom(name){if(name==='A'&&listA.length){state.indexA=Math.floor(Math.random()*listA.length);}else if(name==='B'&&listB.length){state.indexB=Math.floor(Math.random()*listB.length);}saveState(state);const vid=getCurrentVideoId();if(vid&&player&&isReady){player.loadVideoById(vid);}}function play(){if(!player||!isReady)return;try{player.playVideo();}catch{}state.playing=true;saveState(state);setBtn(true);}function pause(){if(!player||!isReady)return;try{player.pauseVideo();}catch{}state.playing=false;saveState(state);setBtn(false);}function onPlayerReady(){isReady=true;if(!getCurrentVideoId()){loadRandomFrom(state.currentList);}else{player.cueVideoById(getCurrentVideoId());}if(state.playing){play();}}function onPlayerStateChange(e){if(e.data===YT.PlayerState.ENDED){state.currentList=swapList(state.currentList);saveState(state);loadRandomFrom(state.currentList);if(state.playing)play();}}function onPlayerError(){const curr=state.currentList;loadRandomFrom(curr);if(!getCurrentVideoId()){state.currentList=swapList(curr);loadRandomFrom(state.currentList);}if(state.playing)play();}if(btn){btn.addEventListener('click',()=>{if(!player||!isReady)return;if(state.playing)pause();else{if(!getCurrentVideoId()){loadRandomFrom(state.currentList);}play();}});}})();
